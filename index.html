<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arduino Gaming System</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <h1><i class="fas fa-gamepad"></i> Arduino Gaming System</h1>
                <div class="status-indicator">
                    <span class="status-dot" id="connectionStatus"></span>
                    <span id="connectionText">Connecting...</span>
                </div>
            </div>
        </header>

        <main class="dashboard">
            <!-- System Status Card -->
            <div class="card system-status">
                <div class="card-header">
                    <h2><i class="fas fa-microchip"></i> System Status</h2>
                    <div class="last-update">Last Update: <span id="lastUpdate">Never</span></div>
                </div>
                <div class="card-content">
                    <div class="status-grid">
                        <div class="status-item">
                            <i class="fas fa-wifi"></i>
                            <div>
                                <span class="label">WiFi Signal</span>
                                <span class="value" id="wifiSignal">-</span>
                            </div>
                        </div>
                        <div class="status-item">
                            <i class="fas fa-clock"></i>
                            <div>
                                <span class="label">Uptime</span>
                                <span class="value" id="uptime">-</span>
                            </div>
                        </div>
                        <div class="status-item">
                            <i class="fas fa-memory"></i>
                            <div>
                                <span class="label">Free Memory</span>
                                <span class="value" id="freeMemory">-</span>
                            </div>
                        </div>
                        <div class="status-item">
                            <i class="fas fa-link"></i>
                            <div>
                                <span class="label">Arduino</span>
                                <span class="value" id="arduinoStatus">-</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Games Grid -->
            <div class="games-grid">
                <!-- UFO Attack Card -->
                <div class="card game-card ufo-game">
                    <div class="card-header">
                        <h2><i class="fas fa-rocket"></i> UFO Attack</h2>
                        <div class="game-status" id="ufoStatus">Idle</div>
                    </div>
                    <div class="card-content">
                        <div class="game-stats">
                            <div class="stat">
                                <span class="stat-label">Score</span>
                                <span class="stat-value" id="ufoScore">0</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Level</span>
                                <span class="stat-value" id="ufoLevel">1</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Lives</span>
                                <span class="stat-value" id="ufoLives">5</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Kills</span>
                                <span class="stat-value" id="ufoKills">0</span>
                            </div>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-label">Level Progress</div>
                            <div class="progress">
                                <div class="progress-fill" id="ufoProgress"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Snake Game Card -->
                <div class="card game-card snake-game">
                    <div class="card-header">
                        <h2><i class="fas fa-snake"></i> Snake Game</h2>
                        <div class="game-status" id="snakeStatus">Idle</div>
                    </div>
                    <div class="card-content">
                        <div class="game-stats">
                            <div class="stat">
                                <span class="stat-label">Score</span>
                                <span class="stat-value" id="snakeScore">0</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Length</span>
                                <span class="stat-value" id="snakeLength">2</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Speed</span>
                                <span class="stat-value" id="snakeSpeed">1</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Food</span>
                                <span class="stat-value" id="snakeFood">0</span>
                            </div>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-label">Snake Length</div>
                            <div class="progress">
                                <div class="progress-fill" id="snakeProgress"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Remote Controls Panel -->
            <div class="card controls-panel">
                <div class="card-header">
                    <h2><i class="fas fa-gamepad"></i> Remote Controls</h2>
                    <div class="controls-status">
                        <span id="controlsStatus">Ready</span>
                    </div>
                </div>
                <div class="card-content">
                    <div class="virtual-controller">
                        <div class="dpad">
                            <button class="control-btn up" onmousedown="sendControl('up')" onmouseup="sendControl('release')">
                                <i class="fas fa-chevron-up"></i>
                            </button>
                            <div class="dpad-middle">
                                <button class="control-btn left" onmousedown="sendControl('left')" onmouseup="sendControl('release')">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <button class="control-btn right" onmousedown="sendControl('right')" onmouseup="sendControl('release')">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                            <button class="control-btn down" onmousedown="sendControl('down')" onmouseup="sendControl('release')">
                                <i class="fas fa-chevron-down"></i>
                            </button>
                        </div>
                        <div class="action-buttons">
                            <button class="control-btn fire" onmousedown="sendControl('fire')" onmouseup="sendControl('release')">
                                FIRE
                            </button>
                            <button class="control-btn menu" onclick="sendControl('menu')">
                                MENU
                            </button>
                        </div>
                    </div>
                    <div class="control-info">
                        <p><i class="fas fa-info-circle"></i> Use virtual controls to play remotely</p>
                        <p><i class="fas fa-keyboard"></i> Keyboard shortcuts: Arrow keys + Space/Enter</p>
                        <p><i class="fas fa-mobile-alt"></i> Works on mobile devices</p>
                    </div>
                </div>
            </div>

            <!-- High Scores Section -->
            <div class="card high-scores">
                <div class="card-header">
                    <h2><i class="fas fa-trophy"></i> High Scores</h2>
                    <button class="btn btn-secondary" onclick="refreshHighScores()">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>
                <div class="card-content">
                    <div class="scores-tabs">
                        <button class="tab-btn active" onclick="showScores('all')">All Games</button>
                        <button class="tab-btn" onclick="showScores('ufo')">UFO Attack</button>
                        <button class="tab-btn" onclick="showScores('snake')">Snake</button>
                    </div>
                    <div class="scores-table" id="highScoresTable">
                        <div class="loading">Loading high scores...</div>
                    </div>
                </div>
            </div>

            <!-- Game Visualization -->
            <div class="card game-visualization">
                <div class="card-header">
                    <h2><i class="fas fa-tv"></i> Live Game View</h2>
                    <div class="view-controls">
                        <button class="btn btn-small" onclick="toggleGameView()">
                            <i class="fas fa-eye" id="viewIcon"></i>
                        </button>
                    </div>
                </div>
                <div class="card-content">
                    <div class="game-display" id="gameDisplay">
                        <canvas id="gameCanvas" width="320" height="80"></canvas>
                        <div class="display-info">
                            <p>Live visualization of the LED matrix display</p>
                            <p>Current Game: <span id="currentGame">Menu</span></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Statistics Charts -->
            <div class="card statistics">
                <div class="card-header">
                    <h2><i class="fas fa-chart-line"></i> Game Statistics</h2>
                    <select id="statsTimeframe" onchange="updateStats()">
                        <option value="1h">Last Hour</option>
                        <option value="24h">Last 24 Hours</option>
                        <option value="7d">Last 7 Days</option>
                        <option value="30d">Last 30 Days</option>
                    </select>
                </div>
                <div class="card-content">
                    <div class="stats-grid">
                        <div class="stat-chart">
                            <h3>Score Progression</h3>
                            <canvas id="scoreChart" width="300" height="150"></canvas>
                        </div>
                        <div class="stat-chart">
                            <h3>Game Sessions</h3>
                            <canvas id="sessionChart" width="300" height="150"></canvas>
                        </div>
                    </div>
                    <div class="stats-summary">
                        <div class="summary-item">
                            <span class="summary-label">Total Games Played</span>
                            <span class="summary-value" id="totalGames">0</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Average Session Time</span>
                            <span class="summary-value" id="avgSession">0m</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Best Streak</span>
                            <span class="summary-value" id="bestStreak">0</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Panel -->
            <div class="card settings-panel">
                <div class="card-header">
                    <h2><i class="fas fa-cog"></i> Settings</h2>
                </div>
                <div class="card-content">
                    <div class="settings-grid">
                        <div class="setting-item">
                            <label for="refreshRate">Refresh Rate (ms)</label>
                            <input type="range" id="refreshRate" min="500" max="5000" value="2000" onchange="updateRefreshRate()">
                            <span id="refreshRateValue">2000ms</span>
                        </div>
                        <div class="setting-item">
                            <label for="soundEnabled">Sound Notifications</label>
                            <input type="checkbox" id="soundEnabled" checked onchange="toggleSound()">
                        </div>
                        <div class="setting-item">
                            <label for="darkMode">Dark Mode</label>
                            <input type="checkbox" id="darkMode" onchange="toggleDarkMode()">
                        </div>
                        <div class="setting-item">
                            <label for="autoRefresh">Auto Refresh</label>
                            <input type="checkbox" id="autoRefresh" checked onchange="toggleAutoRefresh()">
                        </div>
                    </div>
                    <div class="settings-actions">
                        <button class="btn btn-primary" onclick="saveSettings()">
                            <i class="fas fa-save"></i> Save Settings
                        </button>
                        <button class="btn btn-secondary" onclick="resetSettings()">
                            <i class="fas fa-undo"></i> Reset
                        </button>
                        <button class="btn btn-danger" onclick="clearData()">
                            <i class="fas fa-trash"></i> Clear Data
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>&copy; 2024 Arduino Gaming System | 
               <span>Arduino + ESP8266 Web Dashboard</span> | 
               <a href="#" onclick="showAbout()">About</a> | 
               <a href="#" onclick="showHelp()">Help</a>
            </p>
        </footer>
    </div>

    <!-- Modals -->
    <div id="aboutModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('aboutModal')">&times;</span>
            <h2>About Arduino Gaming System</h2>
            <p>Advanced gaming system built with Arduino and ESP8266, featuring real-time web monitoring and remote controls.</p>
            <p><strong>Version:</strong> 2.0</p>
            <p><strong>Hardware:</strong> Arduino Uno/Nano + ESP8266, 16x2 LCD, 4x Max7219 LED Matrix</p>
            <p><strong>Games:</strong> UFO Attack, Snake Game</p>
            <p><strong>Features:</strong> Web dashboard, remote control, high scores, statistics</p>
        </div>
    </div>

    <div id="helpModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('helpModal')">&times;</span>
            <h2>Help & Instructions</h2>
            <h3>Physical Controls:</h3>
            <ul>
                <li><strong>UP/DOWN:</strong> Navigate menus, move ship vertically</li>
                <li><strong>LEFT/RIGHT:</strong> Navigate menus, move ship horizontally, turn snake</li>
                <li><strong>FIRE:</strong> Select menu items, shoot lasers</li>
                <li><strong>UP+DOWN:</strong> Return to main menu from any game</li>
            </ul>
            <h3>Web Dashboard:</h3>
            <ul>
                <li>Monitor game statistics in real-time</li>
                <li>View high scores and game history</li>
                <li>Use virtual controls for remote play</li>
                <li>Customize settings and preferences</li>
            </ul>
            <h3>Connection:</h3>
            <ul>
                <li>Arduino and ESP8266 communicate via serial</li>
                <li>ESP8266 creates WiFi web server</li>
                <li>Access via IP address or hostname</li>
            </ul>
        </div>
    </div>

    <!-- Scripts -->
    <script src="app.js"></script>
</body>
</html>
